

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5. Sphinx 主题定制 &mdash; 文档代码化 (Sphinx) 教程  文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="6. Sphinx 协作开发" href="collaborative-github.html" />
    <link rel="prev" title="4. Sphinx 文档发布" href="local-and-cloud-release.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> 文档代码化 (Sphinx) 教程
          

          
          </a>

          
            
            
              <div class="version">
                V1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">目录：</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. 引言：文档代码化</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick-start.html">2. Sphinx 快速入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst-guide.html">3. reStructuredText 语法指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="local-and-cloud-release.html">4. Sphinx 文档发布</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. Sphinx 主题定制</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">5.1. 使用既定主题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">5.1.1. 安装主题模板</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">5.1.2. 修改配置文件：</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">5.1.3. 生成网页</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id5">5.2. 用户自定义主题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id6">5.2.1. 基础知识</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#html">5.2.1.1. <strong>HTML</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#css">5.2.1.2. <strong>CSS</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#jinja2">5.2.1.3. <strong>jinja2</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id16">5.2.2. 自定义主题实操</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id17">5.2.2.1. 安装jinja2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">5.2.2.2. 查看需要修改的网页模块</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">5.2.2.3. 方法一</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">5.2.2.4. 方法二</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id26">5.2.2.5. 单个网页主题修改</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="collaborative-github.html">6. Sphinx 协作开发</a></li>
<li class="toctree-l1"><a class="reference internal" href="blogging-with-jekll.html">7. 拓展：Jekyll 博客搭建</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">文档代码化 (Sphinx) 教程</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li><span class="section-number">5. </span>Sphinx 主题定制</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/set-theme.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sphinx">
<h1><span class="section-number">5. </span>Sphinx 主题定制<a class="headerlink" href="#sphinx" title="永久链接至标题">¶</a></h1>
<div class="section" id="id1">
<h2><span class="section-number">5.1. </span>使用既定主题<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<p>正如入门指南中所述，下载 Sphinx 后，其安装包中即含有名为 <em>themes</em>
的文件夹， 包括
basic、alabaster、classic、sphinxdoc、scrolls、agogo、nature、pyramid、haiku、traditional、epub、bizstyle
等 12 种内置主题，此外还有不少第三方主题（例如
sphinx_rtd_theme）可通过额外安装后使用。</p>
<p>这里我们主要介绍如何安装并使用
<a class="reference external" href="https://sphinx-rtd-theme.readthedocs.io/en/latest/">sphinx-rtd-theme</a>。</p>
<div class="section" id="id2">
<h3><span class="section-number">5.1.1. </span>安装主题模板<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h3>
<p>直接进入命令行，输入 <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">sphinx-rtd-theme</span></code>，如下图所示：</p>
<div class="figure align-default">
<img alt="intall-rtd" src="_images/install-rtd.png" />
</div>
<p>出现如下代码段即可表示安装成功：</p>
<div class="figure align-default">
<img alt="intall-rtd" src="_images/rtd-install-done.png" />
</div>
<p>完成以上步骤后，同学们可以在 <strong>python</strong> 的安装文件下找到
<strong>sphinx-rtd-theme</strong>文件夹，笔者的文件夹路径则如下所示：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">D</span><span class="p">:</span>\<span class="n">Python</span>\<span class="n">Python38</span><span class="o">-</span><span class="mi">32</span>\<span class="n">Lib</span>\<span class="n">site</span><span class="o">-</span><span class="n">packages</span>\<span class="n">sphinx_rtd_theme</span>
</pre></div>
</div>
<p>在 sphinx_rtd _theme- <em>theme.conf</em> 文件中， 该主题的默认配置如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">theme</span><span class="p">]</span>
<span class="n">inherit</span> <span class="o">=</span> <span class="n">basic</span>
<span class="n">stylesheet</span> <span class="o">=</span> <span class="n">css</span><span class="o">/</span><span class="n">theme</span><span class="o">.</span><span class="n">css</span>
<span class="n">pygments_style</span> <span class="o">=</span> <span class="n">default</span>

<span class="p">[</span><span class="n">options</span><span class="p">]</span>
<span class="n">canonical_url</span> <span class="o">=</span>
<span class="n">analytics_id</span> <span class="o">=</span>
<span class="n">collapse_navigation</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">sticky_navigation</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">navigation_depth</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">includehidden</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">titles_only</span> <span class="o">=</span>
<span class="n">logo_only</span> <span class="o">=</span>
<span class="n">display_version</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">prev_next_buttons_location</span> <span class="o">=</span> <span class="n">bottom</span>
<span class="n">style_external_links</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">style_nav_header_background</span> <span class="o">=</span>
</pre></div>
</div>
<p>基本选项含义：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">inherit</span></code> 给出了 “基本主题” 的名称。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stylesheet</span></code> 给出了将在 <strong>HTML</strong> 标头中引用的css文件的名称。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pygments_style</span></code> 给出了用于突出显示的Pygements 样式的名称。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">analytics_id</span></code> 字符串。配置 Google Analytics ID
可以追踪网站访问情况。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">display_version</span></code> 布尔值。配置是否显示版本号。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">collapse_navigation</span></code> 布尔值。启用后，不在导航栏中显示 +。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">navigation_depth</span></code> 整数。最大深度为4层，设置为 -1 表示不限制深度。</p></li>
</ul>
</div>
<div class="section" id="id3">
<h3><span class="section-number">5.1.2. </span>修改配置文件：<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h3>
<p>在 <em>conf.py</em> 中进行如下设置：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">html_theme</span> <span class="o">=</span> <span class="s1">&#39;sphinx_rtd_theme&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h3><span class="section-number">5.1.3. </span>生成网页<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h3>
<p>命令行中再次输入 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code></p>
<div class="figure align-default">
<img alt="make-rtd-html" src="_images/make-rtd-html.png" />
</div>
<p>即可生成相应主题的网页：</p>
<div class="figure align-default">
<img alt="rtd主题展示" src="_images/sphinx-rtd-theme.png" />
</div>
</div>
</div>
<div class="section" id="id5">
<h2><span class="section-number">5.2. </span>用户自定义主题<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<p>Sphinx里面的模板是已经定义好了的，如果想要自定义主题，如修改主题的颜色、为主题增添内容等，那我们需要掌握一定的
<strong>jinja2</strong>、<strong>HTML</strong> 与 <strong>CSS知识</strong>。</p>
<div class="section" id="id6">
<h3><span class="section-number">5.2.1. </span>基础知识<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h3>
<div class="section" id="html">
<h4><span class="section-number">5.2.1.1. </span><strong>HTML</strong><a class="headerlink" href="#html" title="永久链接至标题">¶</a></h4>
<p>超文本标记语言（英语：HyperText Markup
Language，简称：HTML）是一种用于创建网页的标准标记语言。</p>
<p>同学们可以使用 <strong>HTML</strong> 来建立自己的 WEB 站点，<strong>HTML</strong>
运行在浏览器上，由浏览器来解析。</p>
<div class="section" id="id7">
<h5><span class="section-number">5.2.1.1.1. </span>代码示例<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;我的第一个标题&lt;/h1&gt;
&lt;p&gt;我的第一个段落。&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h5><span class="section-number">5.2.1.1.2. </span>代码解释<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;!DOCTYPE</span> <span class="pre">html&gt;</span></code> 声明为HTML5文档</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;html&gt;</span></code> 是 <strong>HTML</strong> 页面的根元素</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code> 元素包含了文档的元数据，如
<code class="docutils literal notranslate"><span class="pre">&lt;meta</span> <span class="pre">charset=&quot;utf-8&quot;&gt;</span></code>表示网页编码格式为 <strong>utf-8</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;title&gt;</span></code> 描述了文档的标题</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;body&gt;</span></code> 包含了可见的页面内容</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code> 定义一级标题</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;p&gt;</span></code> 定义一个段落</p></li>
</ul>
</div>
<div class="section" id="id9">
<h5><span class="section-number">5.2.1.1.3. </span>推荐学习<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h5>
<p>网上有很多免费的 <strong>HTML</strong> 教程，推荐如下：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.runoob.com/html/html-tutorial.html">HTML菜鸟教程</a></p></li>
<li><p><a class="reference external" href="https://www.bilibili.com/video/av35875257?from=search&amp;seid=1420480764639162062">SiKi学院JavaEE
WEB前端第一季</a></p></li>
</ul>
</div>
</div>
<div class="section" id="css">
<h4><span class="section-number">5.2.1.2. </span><strong>CSS</strong><a class="headerlink" href="#css" title="永久链接至标题">¶</a></h4>
<p><strong>CSS</strong> 用于控制网页的样式和布局。</p>
<div class="section" id="id10">
<h5><span class="section-number">5.2.1.2.1. </span>示例<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">body</span>
<span class="p">{</span>
<span class="n">background</span><span class="o">-</span><span class="n">color</span><span class="p">:</span><span class="n">red</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">h1</span>
<span class="p">{</span>
<span class="n">color</span><span class="p">:</span><span class="n">orange</span><span class="p">;</span>
<span class="n">text</span><span class="o">-</span><span class="n">align</span><span class="p">:</span><span class="n">center</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">p</span>
<span class="p">{</span>
<span class="n">font</span><span class="o">-</span><span class="n">family</span><span class="p">:</span><span class="s2">&quot;Times New Roman&quot;</span><span class="p">;</span>
<span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span><span class="mi">20</span><span class="n">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h5><span class="section-number">5.2.1.2.2. </span>代码解释<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">body</span>
   <span class="p">{</span>
   <span class="n">background</span><span class="o">-</span><span class="n">color</span><span class="p">:</span><span class="c1">#d0e4fe;</span>
   <span class="p">}</span>
</pre></div>
</div>
<p>这段代码表示网页主题的背景色为红色。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">h1</span>
   <span class="p">{</span>
   <span class="n">color</span><span class="p">:</span><span class="n">orange</span><span class="p">;</span>
   <span class="n">text</span><span class="o">-</span><span class="n">align</span><span class="p">:</span><span class="n">center</span><span class="p">;</span>
   <span class="p">}</span>
</pre></div>
</div>
<p>这段代码表示标题1字体颜色为橘色，居中显示。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span>
    <span class="p">{</span>
    <span class="n">font</span><span class="o">-</span><span class="n">family</span><span class="p">:</span><span class="s2">&quot;Times New Roman&quot;</span><span class="p">;</span>
    <span class="n">font</span><span class="o">-</span><span class="n">size</span><span class="p">:</span><span class="mi">20</span><span class="n">px</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>这段代码表示段落文字的字体为 <strong>Times New Roman</strong>，字体大小为
<strong>20px</strong>。</p>
</div>
<div class="section" id="id12">
<h5><span class="section-number">5.2.1.2.3. </span>推荐学习<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h5>
<p>网上有很多免费的 <strong>CSS</strong> 教程，推荐如下：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.runoob.com/css/css-tutorial.html">CSS菜鸟教程</a></p></li>
</ul>
</div>
</div>
<div class="section" id="jinja2">
<h4><span class="section-number">5.2.1.3. </span><strong>jinja2</strong><a class="headerlink" href="#jinja2" title="永久链接至标题">¶</a></h4>
<p>如想对主题增添内容，那我们需要使用 <strong>jinja2</strong> 语言， <strong>jinja2</strong> 是
<strong>Flask</strong> 作者开发的一个模板系统，起初是仿 <strong>django</strong>
模板的一个模板引擎，为 <strong>Flask</strong>
提供模板支持，由于其灵活，快速和安全等优点被广泛使用。</p>
<p><strong>Jinja</strong> 模版是一个文本文件，通过它可以生成任何文本格式的文件，例如
<strong>.html</strong>、<strong>.xml</strong>、<strong>.csv</strong> 等等。一个 <strong>Jinja</strong>
模版并不需要有一个特定的扩展名，完全可以自定义或是不定义.</p>
<p><strong>Jinja</strong>
模版包含了变量、表达式和标签，当模版被渲染时，变量和表达式会被替换为特定的值，标签用来控制模版的逻辑。</p>
<div class="section" id="id13">
<h5><span class="section-number">5.2.1.3.1. </span>代码示例<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;My Webpage&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul id=&quot;navigation&quot;&gt;
{% for item in navigation %}
     &lt;li&gt;&lt;a href=&quot;{{ item.href }}&quot;&gt;{{ item.caption }}&lt;/a&gt;&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;

&lt;h1&gt;My Webpage&lt;/h1&gt;
{{ a_variable }}

{# a comment #}
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
</div>
<div class="section" id="id14">
<h5><span class="section-number">5.2.1.3.2. </span>代码解释<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">...</span> <span class="pre">%}</span></code> 表示循环结构</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{{...}}</span></code> 里内含变量，需要对其进行赋值</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{#...#}</span></code> 用于注释，方便理解代码，并不会输出到结果文件中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">endfor</span> <span class="pre">%}</span></code> 表示循环体的结束</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">item.href</span> <span class="pre">}}</span></code> 表示访问 <strong>item</strong> 这个变量的 <strong>href</strong> 属性</p></li>
</ul>
</div>
<div class="section" id="id15">
<h5><span class="section-number">5.2.1.3.3. </span>推荐学习<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h5>
<p>网上有很多免费的 <strong>HTML</strong> 教程，推荐如下：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.w3cschool.cn/yshfid/">jinja2教程1</a></p></li>
<li><p><a class="reference external" href="https://read.helloflask.com/c3-template">jinja2教程2</a></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="id16">
<h3><span class="section-number">5.2.2. </span>自定义主题实操<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h3>
<p>要自定义文档的输出，可以通过将与原始文件名同名的文件添加到模板目录中来覆盖所有的模板。 Sphinx 将首先在
<em>config.py</em> 中的 template_path
和<em>html_static_path</em> 中查找模板，如果找不到它正在寻找的模板，将回退到所选主题的模板。</p>
<p>Sphinx安装目录下的 <em>themes</em>-<em>basic</em> 中包含 <em>basic</em> 主题，该主题中的
<em>layout.html</em>
为基本模板提供了几个块，这些块使用<strong>jinja2</strong>首先填充原始数据，并由所有内置的Sphinx主题使用。而
<strong>templates_path</strong> 中具有相同名称的模板会覆盖所选主题提供的模板。</p>
<p>该教程简单演示如何使用两种方法更改 <strong>Sphinx_rtd_theme</strong>
主题左侧导航栏的颜色。</p>
<div class="section" id="id17">
<h4><span class="section-number">5.2.2.1. </span>安装jinja2<a class="headerlink" href="#id17" title="永久链接至标题">¶</a></h4>
<p>Anaconda 环境中已经集成了 jinja2，因此无需再次安装。</p>
</div>
<div class="section" id="id18">
<h4><span class="section-number">5.2.2.2. </span>查看需要修改的网页模块<a class="headerlink" href="#id18" title="永久链接至标题">¶</a></h4>
<p>因为我们想要修改导航栏的颜色，所以需要知道生成的网页中左侧导航栏所对应的网页代码。</p>
<p>我们首先进入生成的网页，点击鼠标右键，进入<strong>检查</strong>，找到如下代码块：</p>
<div class="figure align-default">
<img alt="nav-class" src="_images/nav-class.png" />
</div>
<div class="figure align-default">
<img alt="nav-class2" src="_images/nav-class2.png" />
</div>
<p>由以上代码块可知，导航栏所对应的模块属性为 <code class="docutils literal notranslate"><span class="pre">wy-side-nav-search</span></code>、
<code class="docutils literal notranslate"><span class="pre">wy-nav-top</span></code>、<code class="docutils literal notranslate"><span class="pre">.wy-nav-side</span></code>。因此，我们只需要对这几个属性进行修改即可。</p>
</div>
<div class="section" id="id19">
<h4><span class="section-number">5.2.2.3. </span>方法一<a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h4>
<div class="section" id="layout-html">
<h5><span class="section-number">5.2.2.3.1. </span>创建 同名模板 <em>layout.html</em><a class="headerlink" href="#layout-html" title="永久链接至标题">¶</a></h5>
<p>在文件夹里找到 <em>source</em>-<em>templates</em> 文件夹，然后在 <em>templates</em>
文件夹下创建 <em>layout.html</em>。</p>
<p>使用 <strong>jinja2</strong> 在 <em>layout.html</em> 中编写如下代码：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;!layout.html&quot;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">footer</span> <span class="o">%</span><span class="p">}</span> <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>

<span class="o">&lt;</span><span class="n">style</span><span class="o">&gt;</span>
<span class="o">/*</span> <span class="n">Sidebar</span> <span class="n">header</span> <span class="p">(</span><span class="ow">and</span> <span class="n">topbar</span> <span class="k">for</span> <span class="n">mobile</span><span class="p">)</span> <span class="o">*/</span>
<span class="o">.</span><span class="n">wy</span><span class="o">-</span><span class="n">side</span><span class="o">-</span><span class="n">nav</span><span class="o">-</span><span class="n">search</span><span class="p">,</span> <span class="o">.</span><span class="n">wy</span><span class="o">-</span><span class="n">nav</span><span class="o">-</span><span class="n">top</span> <span class="p">{</span>
     <span class="n">background</span><span class="p">:</span> <span class="n">green</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">/*</span> <span class="n">Sidebar</span> <span class="o">*/</span>
<span class="o">.</span><span class="n">wy</span><span class="o">-</span><span class="n">nav</span><span class="o">-</span><span class="n">side</span> <span class="p">{</span>
     <span class="n">background</span><span class="p">:</span> <span class="n">darkorange</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
<span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>对以上代码块解释如下：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{#...#}</span></code> 相当于注释，是为了方便理解代码。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">extends</span> <span class="pre">&quot;!layout.html&quot;</span> <span class="pre">%}</span></code>
在带有感叹号的被覆盖模板的名称前面加上前缀，Sphinx将从底层HTML主题加载布局模板。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">footer</span> <span class="pre">%}</span></code> 表示对 <em>footer</em> 代码块进行改写。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">super()</span> <span class="pre">}}</span></code> 表示继承原模板，即呈现块的原始内容。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">endblock</span> <span class="pre">%}</span></code> 表示代码块结束。</p></li>
</ul>
<p>此段代码的作用是在把网页头部导航栏背景色设置为绿色，左侧导航栏背景色设置为深橘色。</p>
</div>
<div class="section" id="id20">
<h5><span class="section-number">5.2.2.3.2. </span>修改配置文件<a class="headerlink" href="#id20" title="永久链接至标题">¶</a></h5>
<p>我们需要同步修改 <em>config.py</em> 中的配置：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">templates_path</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;_templates&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id21">
<h5><span class="section-number">5.2.2.3.3. </span>生成网页<a class="headerlink" href="#id21" title="永久链接至标题">¶</a></h5>
<p>点击保存后，重新在命令行中键入 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code>，即可生成如下网页：</p>
<div class="figure align-default">
<img alt="改变导航栏颜色" src="_images/change-nav-color.png" />
</div>
</div>
</div>
<div class="section" id="id22">
<h4><span class="section-number">5.2.2.4. </span>方法二<a class="headerlink" href="#id22" title="永久链接至标题">¶</a></h4>
<p>该方法与方法一同理，只是把 <em>css</em> 文件单拎了出来, 即在 <em>layout.html</em>
中链接了外部的 <em>css</em> 文件，并将 <em>css</em> 文件置于<em>static</em> 文件夹下。</p>
<div class="section" id="id23">
<h5><span class="section-number">5.2.2.4.1. </span>创建同名模板 <em>layout.html</em><a class="headerlink" href="#id23" title="永久链接至标题">¶</a></h5>
<p>编写代码如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s2">&quot;!layout.html&quot;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">footer</span> <span class="o">%</span><span class="p">}</span> <span class="p">{{</span> <span class="nb">super</span><span class="p">()</span> <span class="p">}}</span>

<span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s2">&quot;stylesheet&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/css&quot;</span>
<span class="n">href</span><span class="o">=</span><span class="s2">&quot;_static/custom.css&quot;</span><span class="o">&gt;</span>

<span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>对以上代码块解释如下：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">link</span> <span class="pre">rel=&quot;stylesheet&quot;...custom.css</span></code> 表示外链样式表。</p></li>
</ul>
</div>
<div class="section" id="custom-css">
<h5><span class="section-number">5.2.2.4.2. </span>创建 <em>custom.css</em><a class="headerlink" href="#custom-css" title="永久链接至标题">¶</a></h5>
<p>在文件夹里找到 <em>source</em>-<em>static</em> 文件夹，然后在 <em>static</em> 文件夹下创建
<em>custom.css</em>.</p>
<p>使用 <strong>css</strong> 语言 在 <em>custom.css</em> 中编写如下代码：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">wy</span><span class="o">-</span><span class="n">side</span><span class="o">-</span><span class="n">nav</span><span class="o">-</span><span class="n">search</span><span class="p">,</span> <span class="o">.</span><span class="n">wy</span><span class="o">-</span><span class="n">nav</span><span class="o">-</span><span class="n">top</span>
<span class="p">{</span>
     <span class="n">background</span><span class="p">:</span> <span class="n">green</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">.</span><span class="n">wy</span><span class="o">-</span><span class="n">nav</span><span class="o">-</span><span class="n">side</span>
<span class="p">{</span>
     <span class="n">background</span><span class="p">:</span> <span class="n">darkorange</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id24">
<h5><span class="section-number">5.2.2.4.3. </span>修改配置文件<a class="headerlink" href="#id24" title="永久链接至标题">¶</a></h5>
<p>与此同时，在 <em>config.py</em> 中进行如下设置：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">html_static_path</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;_static&quot;</span><span class="p">]</span>

<span class="n">templates_path</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;_templates&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id25">
<h5><span class="section-number">5.2.2.4.4. </span>生成网页<a class="headerlink" href="#id25" title="永久链接至标题">¶</a></h5>
<p>点击保存后，重新在命令行中键入 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code>，即可生成如下网页：</p>
<div class="figure align-default">
<img alt="改变网页样式" src="_images/change-nav-color.png" />
</div>
</div>
</div>
<div class="section" id="id26">
<h4><span class="section-number">5.2.2.5. </span>单个网页主题修改<a class="headerlink" href="#id26" title="永久链接至标题">¶</a></h4>
<p>经过以上操作步骤后，主页主题已修改完毕，但是当我们打开单个页面（如Chapter1）后，主题样式却并没有发生更改。如下图所示：</p>
<div class="figure align-default">
<img alt="单个主题页面" src="_images/single-html.png" />
</div>
<p>原因为何呢？我们可以通过检查网页代码来找到答案。</p>
<p>在上图所示的页面点击鼠标右键，然后点击 <strong>检查</strong> ，在控制台可以看到如下提示：</p>
<div class="figure align-default">
<img alt="控制台错误" src="_images/error-warning.png" />
</div>
<p>报错信息提示：找不到 <strong>css</strong> 文件的位置。将鼠标悬浮在报错信息上，出现如下路径地址：</p>
<div class="figure align-default">
<img alt="路径地址" src="_images/get-path.png" />
</div>
<p>发现原来是 <strong>css</strong> 文件的地址出错了。为解决该问题，我们按照提示，
将 <em>static</em> 文件夹复制到 <em>build</em>-<em>html</em>-<em>contents</em> 文件夹下，保存后再次输入 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code>，即可看到成功为子页面生成了主题。</p>
<div class="figure align-default">
<img alt="路径地址" src="_images/single-html-theme.png" />
</div>
<p>如果同学们想要改变网页的布局、字体信息等，都可以通过修改 <em>custom.css</em> 文件来实现。</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="collaborative-github.html" class="btn btn-neutral float-right" title="6. Sphinx 协作开发" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="local-and-cloud-release.html" class="btn btn-neutral float-left" title="4. Sphinx 文档发布" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, PKUCAT

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <link rel="stylesheet" type="text/css"
  href="_static/custom.css">



</body>
</html>